@using Models;



@*@model IPagedList<Product>;*@
@model List<Product>
@using PagedList.Mvc;
@using PagedList;
@*@Html.PagedListPager(Model, page => Url.Action("index", new { page }));*@

@{
    ViewData["Title"] = "Products";

}
<div class="all-content-wrapper">

    <div class="product-status mg-b-30">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="product-status-wrap">
                        <h4>Products List</h4>
                        @*<div class="add-product">
                                @Html.ActionLink("Add Product", "AddProduct")

                                <a href="product-edit.html"></a>
                            </div>*@
                        <table>
                            <tr>
                                <th>Image</th>
                                <th>Product Name</th>
                                <th>Price</th>
                                <th>Quantity</th>
                                <th>Rate</th>
                                <th>Display</th>
                                <th>Edit</th>
                                <th>Delete</th>
                            </tr>

                            @foreach (Product product in Model)
                            {
                        <tr>
                            <td>
                                <img src="@product.Product_Images.FirstOrDefault()" />
                            
                            </td>

                            <td>@product.Name</td>
                            <td>@product.Price LE</td>
                            <td>@product.Quantity </td>
                            <td>
                                @switch (product.Rate)
                                {
                                    case 1:
                                        <span id="s1" class="s1 fa fa-star checked"></span>
                                        <span id="s2" class="s2 fa fa-star "></span>
                                        <span id="s3" class="s3 fa fa-star "></span>
                                        <span id="s4" class="s4 fa fa-star"></span>
                                        <span id="s5" class="s5 fa fa-star"></span>

                                        break;

                                    case 2:
                                        <span id="s1" class="s1 fa fa-star checked"></span>
                                        <span id="s2" class="s2 fa fa-star checked"></span>
                                        <span id="s3" class="s3 fa fa-star "></span>
                                        <span id="s4" class="s4 fa fa-star"></span>
                                        <span id="s5" class="s5 fa fa-star"></span>

                                        break;

                                    case 3:
                                        <span id="s1" class="s1 fa fa-star checked"></span>
                                        <span id="s2" class="s2 fa fa-star checked"></span>
                                        <span id="s3" class="s3 fa fa-star checked"></span>
                                        <span id="s4" class="s4 fa fa-star"></span>
                                        <span id="s5" class="s5 fa fa-star"></span>

                                        break;
                                    case 4:
                                        <span id="s1" class="s1 fa fa-star checked"></span>
                                        <span id="s2" class="s2 fa fa-star checked"></span>
                                        <span id="s3" class="s3 fa fa-star checked"></span>
                                        <span id="s4" class="s4 fa fa-star checked"></span>
                                        <span id="s5" class="s5 fa fa-star"></span>

                                        break;

                                    case 5:
                                        <span id="s1" class="s1 fa fa-star checked"></span>
                                        <span id="s2" class="s2 fa fa-star checked"></span>
                                        <span id="s3" class="s3 fa fa-star checked"></span>
                                        <span id="s4" class="s4 fa fa-star checked"></span>
                                        <span id="s5" class="s5 fa fa-star checked"></span>

                                        break;


                                }
                            </td>

                            <td>
                                @Html.ActionLink("Display", "Detiles", new { ID = @product.ID }, new { @class = "btn btn-primary" })

                            </td>
                            <td>
                                @Html.ActionLink("Update", "Update", @product, new { @class = "btn btn-success" })

                            </td>
                            <td>
                                @Html.ActionLink("Delete", "Delete", new { ID = @product.ID }, new { @class = "btn btn-danger" })

                            </td>
                        </tr>
                            }



                        </table>


                        <div class="custom-pagination">

                            <ul class="pagination">
                                <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                                <li class="page-item"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">Next</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<style>
    .checked {
        color: orange;
    }
</style>

@*@section Products
    {
        active
    }*@
@*<script>
        function Display(id) {
            $.get("https://localhost:44354/api/product/" + id, function (data, status) {
                var Data = data.data;
                console.log(Data);
            })
        }
        function Update(id) {
            $.get("https://localhost:44354/api/product/" + id, function (data, status) {
                var Data = data.data;
                console.log(Data);
            })
        }
        function Delete(id) {
            //$.post("https://localhost:44354/product/delete" + id, function (data, status) {
            //    var Data = data.data;
            //    console.log(Data);
            //})
        }
        fetch("https://localhost:44354/api/product").then((res) => {
            return res.data.json();
        }).then((resjson) => {

            let tbody = document.getElementById("products");

            resjson.forEach(dt => {
                let tr = document.createElement("tr");
                tr.innerHTML = "<td>" + dt.id + "</td>" +
                    "<td>" + dt.name + "</td>" +
                    "<td>" + dt.price + "</td>" +
                    "<td>" + dt.rate + "</td>" +
                    "<td><img width='30vw' height='30vw' src='" + dt.image + "' /></td>" +
                    "<td><button class='btn btn-dark'onclick='Display(" + dt.id + ")'>Display </button> </td>" +
                    "<td><button class='btn btn-primary'onclick='Update(" + dt.id + ")'>Update </button> </td>" +
                    "<td><button class='btn btn-danger'onclick='Delete(" + dt.id + ")'>Delete </button> </td>";
                tbody.append(tr);

            });
            $(document).ready(function () {
                $("#btn").click(function () {
                    $.get("https://localhost:44354/api/product", function (data, status) {
                        var Data = data.data;

                        Data.forEach(function (dt) {
                            $("#products").append("<tr>" +
                                "<td>" + dt.id + "</td>" +
                                "<td>" + dt.name + "</td>" +
                                "<td>" + dt.price + "</td>" +
                                "<td>" + dt.rate + "</td>" +
                                "<td><img width='30vw' height='30vw' src='" + dt.image + "' /></td>" +
                                "<td><button class='btn btn-dark'onclick='Display(" + dt.id + ")'>Display </button> </td>" +
                                "<td><button class='btn btn-primary'onclick='Update(" + dt.id + ")'>Update </button> </td>" +
                                "<td><button class='btn btn-danger'onclick='Delete(" + dt.id + ")'>Delete </button> </td>" +






                                + "</tr>")
                        })
                    })
                })
            })
        //function viewProduct() {
        //    $.ajax({
        //        url: "https://localhost:44354/product",
        //        method: "Get",
        //        success: function (data) {
        //            console.log(data);
        //            $(".id").append("<tr><td>" + data + "<td/> </tr>");

        //        },
        //        error: function (error) {
        //            console.error(error);

        //        },
        //    })
        //}
    </script>*@
